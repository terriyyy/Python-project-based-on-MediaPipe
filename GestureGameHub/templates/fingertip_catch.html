<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fingertip Catch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background:#0f1720; color: #eee; font-family: Nunito, sans-serif; text-align:center; padding-top:20px; }
        .board-container { display:inline-block; background:#0b1220; padding:12px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.6); }
        img.game-feed { border-radius:8px; max-width:90vw; height:auto; }
        .controls { margin-top:12px; display:flex; gap:12px; justify-content:center; }
    </style>
</head>
<body>
    <a href="/" class="btn btn-outline-light" style="position:absolute; left:20px; top:20px;">â¬… Back</a>
    <div class="container">
        <h1>ðŸŒŸ Fingertip Catch</h1>
        <p>Use your index fingertip to catch falling stars. Lose a life if a star hits the ground. Q to quit.</p>
        <div class="board-container">
            <img id="game-feed" src="{{ url_for('video_feed') }}?game_name=fingertip_catch" class="game-feed" width="1280" height="720" alt="Fingertip Catch Feed">
        </div>
        <div class="controls">
            <button id="start-btn" class="btn btn-success">Start</button>
            <button id="restart-btn" class="btn btn-primary">Restart</button>
        </div>
    </div>

<script>
document.getElementById('start-btn').addEventListener('click', async function(){
    try{
        const res = await fetch('/api/start_game', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({game_name:'fingertip_catch'})});
        const j = await res.json();
        if(j.status === 'started'){
            this.innerText = 'Playing...'; this.disabled = true;
            setTimeout(()=>{ this.innerText = 'Start'; this.disabled = false; }, 1000*60*10);
        } else {
            alert('Failed to start: ' + JSON.stringify(j));
        }
    } catch(e){ alert('Failed to start: ' + e); }
});

document.getElementById('restart-btn').addEventListener('click', async function(){
    try{
        const res = await fetch('/api/start_game', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({game_name:'fingertip_catch'})});
        const j = await res.json();
        if(j.status === 'started'){
            // visual feedback briefly
            this.innerText = 'Restarted';
            setTimeout(()=>{ this.innerText = 'Restart'; }, 1000);
        } else {
            alert('Failed to restart: ' + JSON.stringify(j));
        }
    } catch(e){ alert('Failed to restart: ' + e); }
});
</script>
</body>
</html>
