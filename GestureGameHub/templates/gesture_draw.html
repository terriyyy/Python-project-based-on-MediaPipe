<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Gesture Draw</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; color: #333; font-family: 'Nunito', sans-serif; text-align: center; padding-top: 20px; }
        .btn-back { position: absolute; top: 20px; left: 20px; border-radius: 20px; }
        .board-container { position: relative; display: inline-block; background: white; padding: 10px; border-radius: 15px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        img.game-feed { border-radius: 8px; display:block; max-width: 90vw; height: auto; max-height: 75vh; }
        .controls { margin-top: 16px; display:flex; gap:12px; justify-content:center; }
    </style>
</head>
<body>
    <a href="/" class="btn btn-back btn-outline-primary">â¬… è¿”å›å¤§å…</a>
    <div class="container-fluid d-flex flex-column align-items-center">
        <h1>ğŸ¨ Gesture Draw</h1>
        <p>åœ¨è§„å®šæ—¶é—´å†…ç”¨é£ŸæŒ‡ç”»å‡ºå±å¹•ä¸Šçš„ç›®æ ‡å›¾å½¢æ¥å¾—åˆ†ã€‚</p>
        <div class="board-container">
            <img id="game-feed" src="{{ url_for('video_feed') }}?game_name=gesture_draw" class="game-feed" width="1280" height="720" alt="Gesture Draw Game Feed">
        </div>

        <div class="controls">
            <button id="start-btn" class="btn btn-success">å¼€å§‹æ¸¸æˆ (60s)</button>
            <button id="clear-btn" class="btn btn-secondary">æ¸…ç©ºç”»å¸ƒ</button>
        </div>

        <div style="margin-top:18px; color:#666; max-width:900px; text-align:left;">
            <h5>æ“ä½œè¯´æ˜ï¼ˆè¯·å…ˆç‚¹å‡»å¼€å§‹ï¼‰</h5>
            <ol>
                <li>å±å¹•ä¸Šä¼šå‡ºç°è‹¥å¹²æ©™è‰²ç¼–å·å…³é”®ç‚¹ï¼ˆä¾‹å¦‚ 1ã€2ã€3ï¼‰ï¼Œè¯·æŒ‰æ•°å­—é¡ºåºç”¨é£ŸæŒ‡å°†å®ƒä»¬ä¾æ¬¡è¿æ¥ã€‚</li>
                <li>å°½é‡å°†ä½œç”»ä¿æŒåœ¨ç”»é¢ä¸­å¤®ï¼ˆç›®æ ‡å·²è¢«é™åˆ¶åˆ°ä¸­å¿ƒåŒºåŸŸï¼‰ã€‚</li>
                <li>æ‰‹åŠ¿è¯´æ˜ï¼š<b>é£ŸæŒ‡â†‘ï¼ˆä¸­æŒ‡â†“ï¼‰</b> ä¸ºç»˜åˆ¶ï¼›åŒæ—¶ä¼¸å‡ºé£ŸæŒ‡+ä¸­æŒ‡æˆ–äº”æŒ‡æ¸…ç©ºç”»å¸ƒã€‚</li>
                <li>è‹¥éœ€è¦æ‰‹åŠ¨æ¸…ç©ºï¼Œè¯·ç‚¹å‡»â€œæ¸…ç©ºç”»å¸ƒâ€æŒ‰é’®ï¼ˆä¼šè¯·æ±‚åç«¯ç«‹å³æ¸…ç©ºï¼‰ã€‚</li>
            </ol>
        </div>
     </div>

     <script>
        document.getElementById('start-btn').addEventListener('click', async function(){
            try{
                const res = await fetch('/api/start_game', {
                    method:'POST',
                    headers: {'Content-Type':'application/json'},
                    body: JSON.stringify({game_name: 'gesture_draw'})
                });
                const j = await res.json();
                if(j.status === 'started'){
                    this.innerText = 'è¿›è¡Œä¸­...';
                    this.disabled = true;
                    setTimeout(()=>{ this.innerText = 'å¼€å§‹æ¸¸æˆ (60s)'; this.disabled = false; }, 61000);
                } else {
                    alert('æ— æ³•å¼€å§‹æ¸¸æˆ: ' + (j.message || JSON.stringify(j)));
                }
            } catch(e){ alert('æ— æ³•å¼€å§‹æ¸¸æˆ: ' + e); }
        });

        document.getElementById('clear-btn').addEventListener('click', async function(){
            try{
                const r = await fetch('/api/clear_canvas', {
                    method:'POST',
                    headers: {'Content-Type':'application/json'},
                    body: JSON.stringify({game_name: 'gesture_draw'})
                });
                const j = await r.json();
                if(j.status === 'ok'){
                    // çŸ­æš‚æç¤º
                    const btn = document.getElementById('clear-btn');
                    const old = btn.innerText; btn.innerText = 'å·²æ¸…ç©º'; setTimeout(()=>btn.innerText = old, 1000);
                } else alert('æ¸…ç©ºå¤±è´¥: ' + (j.message || JSON.stringify(j)));
            } catch(e){ alert('æ¸…ç©ºå¤±è´¥: ' + e); }
        });
     </script>
 </body>
 </html>
